# User Story 009.1: Implement Diary Entry Form - Part 1 (Basic Structure and Text Fields)

## 1. Title

Implement the basic structure of the diary entry form and the text-based input fields with the shared UI package.

## 2. Goal

Establish the foundational structure of the diary entry form, render the key text fields, and wire the UI to translations and form state so users can capture the initial details of a moment.

## 3. Description

As a developer, I now consume the completed shared UI components inside a client-side `EntryForm` wrapper that hosts both the chat-first flow and the traditional form. The `TraditionalForm` component brings the text inputs, datetime fields, location selectors, emotions picker, and bookmark toggle together while keeping all labels localized through `next-intl`.

## 4. Technical Details

- `EntryForm` lives inside [apps/food-diary/src/components/EntryForm/EntryForm.tsx](apps/food-diary/src/components/EntryForm/EntryForm.tsx) and orchestrates the `CoachChat` and `TraditionalForm` modes, passes down `WizardEntry` state, and handles delete/bookmark hooks.
- `TraditionalForm` in [apps/food-diary/src/components/EntryForm/Form/TraditionalForm.tsx](apps/food-diary/src/components/EntryForm/Form/TraditionalForm.tsx) is a controlled form that keeps the entire entry in a `useState` object, validates required fields before calling `onComplete`, and renders the text areas, chips, selects, and date/time inputs from `@repo/ui`.
- The shared UI fields include `ChipSelector` for entry type, `TextArea` for `foodEaten`/`description`, `DateInput`/`TimeInput` for the timestamp, `Select` components for location and company (with optional "other" text areas), and a `ToggleButtonGroup` for bookmarking.
- All copy (labels, placeholders, button text) uses the `entry` namespace from `next-intl`, with the base strings declared in [apps/food-diary/messages/en/entry/form.json](apps/food-diary/messages/en/entry/form.json) and [apps/food-diary/messages/nl/entry/form.json](apps/food-diary/messages/nl/entry/form.json).
- The create entry route renders the form via [apps/food-diary/src/templates/CreateEntryTemplate/CreateEntryTemplate.tsx](apps/food-diary/src/templates/CreateEntryTemplate/CreateEntryTemplate.tsx), which keeps track of unsaved changes and bookmark state while delegating the actual input UI to `EntryForm`.

## 5. Steps to Implement

1. Add the `EntryForm` wrapper with `EntryFormHeader`, mode switching, and coach/chat integration so the user can toggle between automated guidance and the traditional form.
2. Create `TraditionalForm` with `ChipSelector`, date/time pickers, and text areas, wiring every field to `WizardEntry` state and validating `entryType`/`foodEaten` before progressing.
3. Pull the options for entry type, location, company, behavior, and emotions from the shared `options.ts` utilities; show the conditional "other" text areas for location/company.
4. Register all copy into the `entry` translation namespace and ensure the component uses `useTranslations` for each label, placeholder, hint, and button.
5. Embed the form inside `CreateEntryTemplate` so it renders on `/entry/create` with the existing header/unsaved-change guard.

## 6. Acceptance Criteria

- [x] `EntryForm` coordinates chat/traditional modes, handles delete/bookmark state, and returns to `/dashboard` via `handleComplete` when the user finishes the form ([EntryForm.tsx](apps/food-diary/src/components/EntryForm/EntryForm.tsx)).
- [x] `TraditionalForm` renders entry type chips (`ChipSelector`), conditional `foodEaten` and `description` text areas, and the grouped datetime inputs while preventing submission when `entryType` is empty ([TraditionalForm.tsx](apps/food-diary/src/components/EntryForm/Form/TraditionalForm.tsx)).
- [x] Date and time inputs rely on `DateInput` and `TimeInput` from `@repo/ui`, and the layout keeps them side-by-side inside a `FormSection`.
- [x] All labels, placeholders, hints, and button text are localized through `useTranslations("entry")`, with the canonical strings stored in [messages/en/entry/form.json](apps/food-diary/messages/en/entry/form.json) and [messages/nl/entry/form.json](apps/food-diary/messages/nl/entry/form.json).
- [x] The form lives in the create-entry route via `CreateEntryTemplate`, which renders `EntryForm` beneath the page header and wires the bookmark & unsaved-change callbacks ([CreateEntryTemplate.tsx](apps/food-diary/src/templates/CreateEntryTemplate/CreateEntryTemplate.tsx)).
- [x] Submission logic gathers the full `WizardEntry` payload, enforces the `foodEaten` requirement unless the user flagged the entry as a "moment" or selected the `skipped meal` behavior, and bubbles the entry up through `onComplete` rather than logging directly.

## 7. Notes

- The implementation intentionally omits a dedicated `Form` component from `react-aria`; instead, a semantic `<form>` wraps the shared `FormSection`, `ChipSelector`, and `TextArea` primitives to keep the UX responsive.
- The plan to use `TextField`, `DatePicker`, and server-action logging was replaced with the current `TextArea`/`DateInput`/`TimeInput` stack because the form manages more fields and richer validation before the save action is added in a later story.
